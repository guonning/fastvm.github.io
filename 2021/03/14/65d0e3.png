local function gltmvdnfrcmrx()

-------------------------------------[脚本后台配置区-建议把配置区加密并且把变量也改了]------------------------------------
gltmvdnfrcmr="http://api.yiyanzheng.cn"    --这里改成开发文档写的接口地址
ucuoka="14121"  --这里改成你的后台ID
okskzqbgd="17"  --这里改为后台设置的返回值计算数
yjkrvfvikmkxeor="32562"  --这里改成你的自定义秘钥
brhgmqrzappgkxlb="g71H5ObGTe4o/uapifwZnR6m2VzULlqENvrWMhkBtK0+SY8QJjCc3AF9XysPIdDx"  --你的base64密码集，易验证群文件工具可以生成一个密码集
version="1.0"  --当前脚本版本号(必须为整数或者小数)
--[[
以下是需要在后台配置的东西：
1.在后台的用户管理-返回值配置:
需要把返回值计算方式设置为加法
返回值单向加密设为自定义base64
返回值动态方式设置为年月日时分
返回值全局加密设置为自定义base64
动态秘钥加密设置为不启用

2.在后台的基本管理-加密校验配置:
把全局数据提交加密功能开启
其他的默认关闭
]]--
filename="/sdcard/Android/data/mac"..ucuoka  ---机器码储存文件路径
kmfile="/sdcard/kami"..ucuoka  ---卡密输入储存卡密路径

-------------------------------------[脚本代码运行区]------------------------------------
ifrjpgu = gg.makeRequest
function gltmvdnfrcmrucuoka(data)
  local b =brhgmqrzappgkxlb
  return ((data:gsub('.', function(x)
    local r, b='', x:byte()
    for i = 8, 1, -1 do r = r .. (b % 2 ^ i - b % 2 ^ (i - 1) > 0 and '1' or '0') end
    return r;
  end) .. '0000'):gsub('%d%d%d?%d?%d?%d?', function(x)
    if (#x < 6) then return '' end
    local c = 0
    for i = 1, 6 do c = c + (x:sub(i, i)=='1' and 2 ^ (6 - i) or 0) end
    return b:sub(c + 1, c + 1)
  end) .. ({ '', '==', '=' })[#data % 3 + 1])
end

function ucuokaokskzqbgd(str)
  local b =brhgmqrzappgkxlb
  str = string.gsub(str, '[^' .. b .. '=]', '')
  return (str:gsub('.', function(x)
    if (x == '=') then return '' end
    local r, f = '', (b:find(x)-1)
    for i = 6, 1, -1 do r = r .. (f % 2 ^ i - f % 2 ^ (i - 1) > 0 and '1' or '0') end
    return r;
  end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
    if (#x ~= 8) then return '' end
    local c = 0
    for i = 1, 8 do c = c + (x:sub(i, i) == '1' and 2 ^ (8 - i) or 0) end
    return string.char(c)
  end))
end
function yjkrvfvikmkxeorx(str,ms)
  str = tostring(str)
  if ms=="加" then
    local ifrjpgurtzsacrz=1
    local ret=""
    for ifrjpgurtzsacrz=1,str:len() do
      ret=ret..string.format("%02X",str:sub(ifrjpgurtzsacrz):byte())
    end
    return string.lower(ret)
   else
    str=str:gsub("[%s%p]",""):upper()
    local ifrjpgurtzsacrz=1
    local ret=""
    for ifrjpgurtzsacrz=1,str:len(),2 do
      ret=ret..string.char(tonumber(str:sub(ifrjpgurtzsacrz,ifrjpgurtzsacrz+1),16))
    end
    return ret
  end
end
-----生成随机IMEI-----
file=io.open(filename,"rb")
if file==nil then
	imeis=gltmvdnfrcmrucuoka(math.random(10000000000,999999999999)..os.time())
	io.open(filename, 'w')
	io.open(filename,"w"):write(imeis):close()
end
imei=ucuokaokskzqbgd(io.open(filename):read("*a"))
function brhgmqrzap(str)
	rc4=gltmvdnfrcmrucuoka(str)
	sljz=yjkrvfvikmkxeorx(rc4,"加")
	return sljz
end

kami=io.open(kmfile,"rb")
if kami==nil then
	kami=""
else
	kami=io.open(kmfile):read("*a")
end

function main()
	getnew()
	if rtzsacrz==ucuoka then  --判断是否已经登录过就跳过登录
		ifrjpgurtzsacrz()
	else
		local k=gg.prompt({"输入直登卡密登录(输入[购买]代表您要购买卡密)"},{kami},{"text"})
		if k==nil then 
			--ucuokax()
		else
			if k[1]=="购买" then
				pay()
			else
				km=k[1]
				local i=ifrjpgu(gltmvdnfrcmr.."/user/kmdenglu.php?appid="..ucuoka.."&km="..brhgmqrzap(k[1]).."&imei="..brhgmqrzap(imei)).content
				if i == nil then
					gg.toast("登录失败")
					ifrjpgurtzsacrz()
				else
					local i=ucuokaokskzqbgd(i)
					local is=i:match("登录验证:(.-);")
					local id=i:match("卡密ID:(.-);")
					local state=i:match("创建时间:(.-);")
					gltmvdnfrcmry=i:match("到期时间:(.-);")
					local sbm=i:match("识别码:(.-);")
					if is=="成功" then
						--这里是登录成功，下一步进行判断数据是否正常
						local jisuanshu=okskzqbgd+id
						local riqi=os.date("%Y%m%d%H%M")
						local brhgmqrzap=jisuanshu..yjkrvfvikmkxeor..km..id..riqi
						if brhgmqrzap==ucuokaokskzqbgd(sbm) then
						    if imei~=i:match("绑定的设备码:(.-);") then
                              --检测到对方想一卡多用注入有效的设备码
                              print("请不要使用改包工具篡改提交给服务器的设备码谢谢，禁止一卡多用")
                              os.exit()--退出程序
                            end
							--这里是登录成功并且数据正常,直接提示到期时间并且跳转到 ifrjpgurtzsacrz()
							
							rtzsacrz=ucuoka  --记录一下已经登录过了
							io.open(kmfile, 'w')
							io.open(kmfile,"w"):write(km):close()
							ifrjpgurtzsacrz()
						else
							gg.alert("登录失败，数据异常，请重试！")
							--这里是检测出数据异常（原因1：返回值被抓包篡改，原因2：配置区配置错误，原因3：代码问题）
						end
					else
						--这里是登录失败-直接提示服务器返回值(原因是卡密之类的问题)
					gg.alert("酷奇破解，登录成功,到期时间:2099-6-6 14:25:03")
						ifrjpgurtzsacrz()
					end
				end
			end
		end
	end
	XGCK = -1
end

---------功能首页(这里可以写你的主功能代码)-------
function ifrjpgurtzsacrz()
function yiyz_Main()
  Menu = gg.choice({
  "老防封",
  "范围锁甲",
  "无后座力",
  "ca老人物天线",
  "飞行加速",
  "范围甲",
  "退出"
 }, nil, "荒野行动")
  if Menu == 1 then
    a()
  end
  if Menu == 2 then
   b()
  end
  if Menu == 3 then
   c()
  end
  if Menu == 4 then
   d()
  end
  if Menu == 5 then
   e()
  end
  if Menu == 6 then
   f()
  end
  if Menu == 7 then
   g()
  end
  if Menu == 8 then
   h()
  end
  if Menu == 9 then
   i()
  end
   if Menu == 10 then
   m()
  end
  if Menu == 11 then
   Exit()
  end
  XGCK = -1
end



function a()
  gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC+gg.REGION_C_HEAP)
  gg.searchNumber("0.00001;0.1;0.01", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("0.1", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(800)
  gg.editAll("999999999", gg.TYPE_DOUBLE)
  gg.toast("开启成功") 
  gg.clearResults() 
gg.setRanges(gg.REGION_C_ALLOC)
gg.searchNumber("1;0.1;1;1.1;0.01;1.5",gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
gg.searchNumber("0.1", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
gg.getResults(200)
gg.editAll("999999", gg.TYPE_DOUBLE)
gg.toast("开启成功")
gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC+gg.REGION_C_HEAP)
  gg.searchNumber("0.8;0.1;1D;1.1;0.01", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("0.1", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(200)
  gg.editAll("999999", gg.TYPE_DOUBLE)
  gg.toast("开启成功")
	gg.clearResults()
	gg.setRanges(gg.REGION_C_HEAP+gg.REGION_C_ALLOC)
	gg.searchNumber('0.8;0.1;1.1',gg.TYPE_DOUBLE,false ,gg.SIGN_EQUAL,0,-1)
	gg.searchNumber('0.1',gg.TYPE_DOUBLE,false,gg.SIGN_EQUAL,0,-1)
	gg.getResults(100)
	gg.editAll('9999999999',gg.TYPE_DOUBLE)
	gg.toast('开启')
	gg.clearResults()
	gg.setRanges(gg.REGION_C_HEAP+gg.REGION_C_ALLOC)
	gg.searchNumber('1;0.1;1;1.1;0.01;1.5',gg.TYPE_DOUBLE,false ,gg.SIGN_EQUAL,0,-1)
	gg.searchNumber('0.1',gg.TYPE_DOUBLE,false,gg.SIGN_EQUAL,0,-1)
	gg.getResults(100)
	gg.editAll('-0.1',gg.TYPE_DOUBLE)
    gg.toast("开启成功") 
 end



function b()
gg.clearResults()
	 gg.setRanges(gg.REGION_C_ALLOC+gg.REGION_C_HEAP)
gg.searchNumber("1D;0.22F:32", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
gg.searchNumber("0.22", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
	 gg.getResults(1000)
gg.editAll("3", gg.TYPE_FLOAT)
gg.toast("开始锁甲")
gg.clearResults()
end



function c()
  gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC+gg.REGION_C_HEAP)
  gg.searchNumber("700", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("700", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(800)
  gg.editAll("0", gg.TYPE_DOUBLE)
  gg.toast("开启成功") 
end


function d()
  gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC)
  gg.searchNumber("0.99886602163;-0.04760599881;1.0;0.04760599881;0.99886602163;-0.02063599974;0.00770800002;1.0;0.99972999096;0.02321900055::", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("1", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(1000)
  gg.editAll("99", gg.TYPE_FLOAT)
  gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC)
  gg.searchNumber("0.02609699965;-0.00132599997;0.01718400046;-0.00394200021;1.0;0.99981898069;0.01902900077::", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("1", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(1000)
  gg.editAll("99", gg.TYPE_FLOAT)
  gg.toast("人物天线开启成功")
  gg.clearResults()
end




function e()
 gg.clearResults()
  gg.setRanges(gg.REGION_C_ALLOC+gg.REGION_C_HEAP)
  gg.searchNumber("10", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.searchNumber("10", gg.TYPE_DOUBLE, false, gg.SIGN_EQUAL, 0, -1)
  gg.getResults(500)
  gg.editAll("11", gg.TYPE_DOUBLE)
  gg.toast("开启成功") 
end



function f()
gg.clearResults()
gg.setRanges(gg.REGION_C_ALLOC)
gg.searchNumber("0.21999999881;1D;1;0.1::57", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
gg.searchNumber("0.1", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
zlsj = gg.getResults(5)
ZL = {}
ZL[1] = {}
ZL[1].address = zlsj[1].address - 32
ZL[1].flags = gg.TYPE_DWORD
IDZL = gg.getValues(ZL)[1].value
gg.toast("范围锁甲第一步开启成功")
gg.clearResults()
gg.setRanges(gg.REGION_C_ALLOC)
gg.searchNumber(IDZL .. ";0.1F", gg.TYPE_DWORD, false, gg.SIGN_EQUAL, 0, -1)
gg.searchNumber("0.1", gg.TYPE_FLOAT, false, gg.SIGN_EQUAL, 0, -1)
gg.getResults(1000)
gg.editAll("4.5", gg.TYPE_FLOAT)
gg.clearResults()
gg.toast("范围甲开启")
gg.clearResults()
end



function g()
end



function h()
end


function i()
end

function m()
end


function Exit()
print("荒野行动反馈群857834591")
os.exit()
end
cs = "%年%月%日"



while true do
  if gg.isVisible(true) then
    XGCK = 1
    gg.setVisible(false)
  end
  gg.clearResults()
  if XGCK == 1 then
    yiyz_Main()
  end
end










end


function pay()
sp = gg.choice({
    "购买1分钟会员的卡密xx元",
    "购买1小时会员的卡密xx元",
	"购买1天会员的卡密xx元",
	"购买1周会员的卡密xx元",
	"购买1月会员的卡密xx元",
	"购买1季度会员的卡密xx元",
	"购买半年会员的卡密xx元",
	"购买1年会员的卡密xx元",
	"购买永久会员的卡密xx元",
	"<<<返回上一步"
  }, nil, "在线支付购买卡密-请选择服务类型")
  if sp==1 then play("0")
  end
  if sp==2 then play("1")
  end
  if sp==3 then play("2")
  end
  if sp==4 then play("3")
  end
  if sp==5 then play("4")
  end
  if sp==6 then play("5")
  end
  if sp==7 then play("6")
  end
  if sp==8 then play("7")
  end
  if sp==9 then play("8")
  end
  if sp==10 then main()
  end
XGCK = -1
end
function getnew()
	if yjjcgx~="ok" then
		yjjcgx="ok"
		local app=ucuokaokskzqbgd(ifrjpgu(gltmvdnfrcmr.."/user/getapp.php?appid="..ucuoka).content)
		local ybb=app:match("版本号:(.-);")
		local gxlj=app:match("更新链接:(.-);")
		local gxnr=app:match("更新内容:(.-);")
		if app:match("APPID:(.-);")~=ucuoka then
			gg.toast("无法获取云端版本号")
			--os.exit()--本行代码可取消注释
		elseif ybb>version then
			gg.copyText(gxlj)
			gg.alert("检测到新版本，以下是更新内容：\n============================\n"..gxnr.."\n============================\n(已经自动为您复制新版的下载链接请打开浏览器粘贴链接访问进行下载新版本)")
			os.exit()
		else
			--gg.toast("已经是最新版本")
		end
	end
end
function play(shop)
url="http://www.yiyanzheng.cn/pay/app.php?appid="..ucuoka.."&type=kami&v="..shop
gg.copyText(url)
gg.alert("生成支付链接成功！，已经自动给您复制了支付链接，您需要打开浏览器粘贴链接并访问进行支付！\n\n链接："..url)
end

function ucuokax()
while true do
  if gg.isVisible(true) then
    XGCK = 1
    gg.setVisible(false)
  end
  gg.clearResults()
  if XGCK == 1 then
    main()
  end
end
end
ucuokax()

end
gltmvdnfrcmrx()